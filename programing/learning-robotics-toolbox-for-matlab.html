<!DOCTYPE html>
<html lang="zh">
<head>

        <title>Robotics Toolbox for MATLAB学习笔记（一）</title>
        <meta charset="utf-8" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="飞扬博客-MirsKing Full Atom Feed" />
        <link href="/feeds/programing.atom.xml" type="application/atom+xml" rel="alternate" title="飞扬博客-MirsKing Categories Atom Feed" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="/theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="/theme/pygment.css" />

        <script src="/theme/js/libs/modernizr-2.6.2.min.js"></script>




</head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="/">飞扬博客-MirsKing <strong></strong></a></h1>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>
             
              <ul class="columns">
                <li><a href="/">Home</a></li>

                <li><a href="/pages/about.html">About</a></li>

              </ul>
            </div>

<section id="content" class="body">

   <div class="row">
        <div class="eleven columns">


            <header>
              <h2 class="entry-title">
                <a href="/programing/learning-robotics-toolbox-for-matlab.html" rel="bookmark"
                   title="Permalink to Robotics Toolbox for MATLAB学习笔记（一）">Robotics Toolbox for MATLAB学习笔记（一）</a></h2>
           
            </header>
            <footer class="post-info">
              <abbr class="published" title="2014-02-05T10:03:00+08:00">
                三 05 二月 2014
              </abbr>
              <address class="vcard author">By 
                <a class="url fn" href="/author/mirsking.html"> mirsking</a>
              </address>
            </footer><!-- /.post-info -->
            <div class="entry-content">
              <p>Robotics Toolbox for MATLAB是由Peter I. Corke编写的第三方工具箱。提供了机器人轨迹规划的各种函数。</p>
<p>从今天开始要学习该工具箱并能熟练掌握。本文将记录每日的学习进度，以供将来查阅。</p>
<h3>第一天（2014,2,5）Robotics Toolbox的安装与简单函数的学习</h3>
<p>根据<a href="http://www.petercorke.com/Robotics_Toolbox.html">官网的说明</a>，安装步骤如下：</p>
<ol>
<li>Download it from here in zip format (.zip).</li>
<li>The Toolbox is tested with MATLAB R2011a.</li>
<li>To install the Toolbox simply unpack the archive which will create
    the directory (folder) rvctools, and within that the directories
    robot, simulink, and common.</li>
<li>Adjust your MATLABPATH to include rvctools Execute the startup file
    rvctools/startup_rvc.m and this will place the correct directories
    in your MATLAB path.</li>
<li>Run the demo rtbdemo to see what it can do</li>
<li>To get the MEX version of rne visit the folder rvctools/robot/mex
    and follow the directions in the README file</li>
</ol>
<p>安装完成后，即可正常使用工具箱中的相关函数。本次测试了以下几个简单函数：rotx，roty，rotz，rpy2tr，tr2rpy等几个函数。</p>
<p>这里简单介绍下rpy2tr函数：</p>
<div class="highlight"><pre><span class="n">R</span> <span class="o">=</span> <span class="n">RPY2R</span><span class="p">(</span><span class="n">RPY</span><span class="p">,</span> <span class="n">OPTIONS</span><span class="p">)</span> <span class="n">is</span> <span class="n">an</span> <span class="n">orthonormal</span> <span class="n">rotation</span> <span class="n">matrix</span>  
<span class="n">equivalent</span> <span class="n">to</span> <span class="n">the</span><span class="err">  </span><span class="n">specified</span> <span class="n">roll</span><span class="p">,</span> <span class="n">pitch</span><span class="p">,</span> <span class="n">yaw</span> <span class="n">angles</span>  
<span class="n">which</span> <span class="n">correspond</span> <span class="n">to</span> <span class="n">rotations</span> <span class="n">about</span> <span class="n">the</span><span class="err"> </span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span> <span class="n">axes</span> <span class="n">respectively</span><span class="p">.</span>  
<span class="n">If</span> <span class="n">RPY</span> <span class="n">has</span> <span class="n">multiple</span> <span class="n">rows</span> <span class="n">they</span> <span class="n">are</span> <span class="n">assumed</span> <span class="n">torepresent</span>  
<span class="n">a</span> <span class="n">trajectory</span> <span class="n">and</span> <span class="n">R</span> <span class="n">is</span> <span class="n">a</span> <span class="n">three</span> <span class="n">dimensional</span> <span class="n">matrix</span><span class="p">,</span>  
<span class="n">where</span> <span class="n">the</span> <span class="n">last</span> <span class="n">index</span><span class="err"> </span><span class="n">corresponds</span> <span class="n">to</span> <span class="n">the</span> <span class="n">rows</span> <span class="n">of</span> <span class="n">RPY</span><span class="p">.</span>
</pre></div>


<p>就是说R = RPY2R(RPY, OPTIONS)是将欧拉角RPY（这个RPY是由分别绕X、Y、Z轴旋转的角度roll、pitch、yaw表示的）转换为旋转矩阵。如果RPY是多列矩阵，那么结果R表示的是最后一次的旋转矩阵。</p>
<p>另外这个函数有两个选项，‘deg’表示以度数为单位输入；‘zyx’表示按Z、Y、X轴旋转得到旋转矩阵。</p>
<h3>第二天（2014,2,7）Link() SerialLink()  fkine()函数学习</h3>
<h4>link函数的调用格式</h4>
<div class="highlight"><pre><span class="n">L</span> <span class="o">=</span> <span class="n">LINK</span><span class="p">([</span><span class="n">theta</span> <span class="n">D</span><span class="err"> </span><span class="n">A</span><span class="err"> </span><span class="n">alpha</span><span class="p">])</span>

<span class="n">L</span> <span class="o">=</span><span class="n">LINK</span><span class="p">([</span><span class="n">theta</span> <span class="n">D</span><span class="err"> </span><span class="n">A</span><span class="err"> </span><span class="n">alphaD</span> <span class="n">sigma</span><span class="p">])</span>

<span class="n">L</span> <span class="o">=</span><span class="n">LINK</span><span class="p">([</span><span class="n">theta</span> <span class="n">D</span><span class="err"> </span><span class="n">A</span><span class="err"> </span><span class="n">alpha</span> <span class="n">sigma</span> <span class="n">offset</span><span class="p">])</span>

<span class="n">L</span> <span class="o">=</span><span class="n">LINK</span><span class="p">([</span><span class="n">theta</span> <span class="n">D</span><span class="err"> </span><span class="n">A</span><span class="err"> </span><span class="n">alpha</span><span class="p">],</span> <span class="n">CONVENTION</span><span class="p">)</span>

<span class="n">L</span> <span class="o">=</span><span class="n">LINK</span><span class="p">([</span><span class="n">theta</span> <span class="n">D</span><span class="err"> </span><span class="n">A</span><span class="err"> </span><span class="n">alpha</span> <span class="n">sigma</span><span class="p">],</span> <span class="n">CONVENTION</span><span class="p">)</span>

<span class="n">L</span> <span class="o">=</span><span class="n">LINK</span><span class="p">([</span><span class="n">theta</span> <span class="n">D</span><span class="err"> </span><span class="n">A</span><span class="err"> </span><span class="n">alpha</span> <span class="n">sigma</span> <span class="n">offset</span><span class="p">],</span> <span class="n">CONVENTION</span><span class="p">)</span>
</pre></div>


<p>参数CONVENTION可以取‘standard’和‘modified’，其中‘standard’代表采用标准的D-H参数，‘modified’代表采用改进的D-H参数。参数‘alpha’代表扭转角，参数‘A’代表杆件长度，参数‘theta’代表关节角，参数‘D’代表横距，参数‘sigma’代表关节类型：0代表旋转关节，非0代表移动关节。另外LINK还有一些数据域：</p>
<div class="highlight"><pre><span class="n">LINK</span><span class="p">.</span><span class="n">alpha</span> <span class="o">%</span><span class="err">返回扭转角</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">A</span> <span class="o">%</span><span class="err">返回杆件长度</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">theta</span> <span class="o">%</span><span class="err">返回关节角</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">D</span> <span class="o">%</span><span class="err">返回横距</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">sigma</span> <span class="o">%</span><span class="err">返回关节类型</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">RP</span> <span class="o">%</span><span class="err">返回‘</span><span class="n">R</span><span class="err">’</span><span class="p">(</span><span class="err">旋转</span><span class="p">)</span><span class="err">或‘</span><span class="n">P</span><span class="err">’</span><span class="p">(</span><span class="err">移动</span><span class="p">)</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">mdh</span> <span class="o">%</span><span class="err">若为标准</span><span class="n">D</span><span class="o">-</span><span class="n">H</span><span class="err">参数返回</span><span class="mi">0</span><span class="err">，否则返回</span><span class="mi">1</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">offset</span> <span class="o">%</span><span class="err">返回关节变量偏移</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">qlim</span> <span class="o">%</span><span class="err">返回关节变量的上下限</span> <span class="p">[</span><span class="n">min</span> <span class="n">max</span><span class="p">]</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">islimit</span><span class="p">(</span><span class="n">q</span><span class="p">)</span> <span class="o">%</span><span class="err">如果关节变量超限，返回</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">+</span><span class="mi">1</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">I</span> <span class="o">%</span><span class="err">返回一个</span><span class="mi">3</span><span class="err">×</span><span class="mi">3</span> <span class="err">对称惯性矩阵</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">m</span> <span class="o">%</span><span class="err">返回关节质量</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">r</span> <span class="o">%</span><span class="err">返回</span><span class="mi">3</span><span class="err">×</span><span class="mi">1</span><span class="err">的关节齿轮向量</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">G</span> <span class="o">%</span><span class="err">返回齿轮的传动比</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">Jm</span> <span class="o">%</span><span class="err">返回电机惯性</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">B</span> <span class="o">%</span><span class="err">返回粘性摩擦</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">Tc</span> <span class="o">%</span><span class="err">返回库仑摩擦</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">dh</span> <span class="k">return</span> <span class="n">legacy</span> <span class="n">DH</span> <span class="n">row</span>

<span class="n">LINK</span><span class="p">.</span><span class="n">dyn</span> <span class="k">return</span> <span class="n">legacy</span> <span class="n">DYN</span> <span class="n">row</span>
</pre></div>


<p>特别要注意的是Link函数的参数顺序在新版本的Toolbox中发生了变换，由之前的L
= LINK([alpha A theta D])变为L = LINK([theta D  A  alpha ])</p>
<h4>SerialLink函数的调用格式</h4>
<p>顾名思义，该函数是将多个由Link生成的连杆连接起来。</p>
<div class="highlight"><pre><span class="n">bot</span> <span class="o">=</span> <span class="n">SerialLink</span><span class="p">([</span><span class="n">L1</span> <span class="n">L2</span> <span class="n">L3</span><span class="p">],</span> <span class="err">&#39;</span><span class="n">name</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">my</span> <span class="n">robot</span><span class="err">&#39;</span><span class="p">);</span>
</pre></div>


<p>如果连杆是由L1 L2 等表示，则按照上式调用。</p>
<p>或者连杆有L(1) L(2)等表示，则可简洁地表示为</p>
<div class="highlight"><pre><span class="n">bot</span> <span class="o">=</span> <span class="n">SerialLink</span><span class="p">(</span><span class="n">L</span> <span class="err">&#39;</span><span class="n">name</span><span class="err">&#39;</span><span class="p">,</span> <span class="err">&#39;</span><span class="n">my</span> <span class="n">robot</span><span class="err">&#39;</span><span class="p">);</span>
</pre></div>


<h4>fkine函数的调用格式</h4>
<p>fkine函数是用来计算操作臂正向运动矩阵（forward kinematics），其调用格式为：</p>
<div class="highlight"><pre><span class="n">bot</span><span class="p">.</span><span class="n">fkine</span><span class="p">([</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span> <span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">])</span> <span class="o">%</span><span class="err">该式表示将</span><span class="n">bot</span><span class="err">操作臂的两个连杆分别旋转</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="err">和 </span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="err">。</span>
</pre></div>


<h4>plot函数的调用格式</h4>
<p>SerialLink函数还有一个plot方法，该方法可以直观地将操作臂的运动状态以图形的形式表示。其调用方式和fkine函数类似。</p>
            </div><!-- /.entry-content -->


        </div><!-- /.eleven.columns -->

<div class="three columns">

<h4>Pages</h4>

 <ul>
      <li><a href="/pages/about.html">About</a></li>
  </ul>

<h4>Categories</h4>
<ul>
		<li><a href="/category/blog.html">Blog</a></li>
		<li><a href="/category/career.html">Career</a></li>
		<li><a href="/category/collections.html">Collections</a></li>
		<li><a href="/category/other-interests.html">Other Interests</a></li>
		<li><a href="/category/programing.html">Programing</a></li>
		<li><a href="/category/tools-configuration.html">Tools Configuration</a></li>
</ul>


<h4>Tags</h4>
	<ul>
</ul>

<nav class="widget">
  <h4>Links</h4>
  <ul>
    <li><a href="http://tianjun.ml/">Tianjun</a></li>
    <li><a href="http://www.peakwang.com">Peakwang</a></li>
  </ul>
</nav>



</div> </div><!-- /.row -->


</section>

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">

    
        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                    which takes great advantage of <a href="http://python.org">Python</a>.
                    <br />
                    Based on the <a target="_blank" href="http://gumbyframework.com">Gumby Framework</a>
                    </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">

                <li><div class="btn primary"><a href="http://www.github.com/mirsking/" target="_blank">Github</a></div></li>




              </ul>
            </div>
          </div>
        </footer>

    </div>


  <script src="/theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="/theme/js/libs/gumby.min.js"></script>
  <script src="/theme/js/plugins.js"></script>

  <!-- Using MathJax, with the delimiters $ -->
  <!-- Conflict with pygments for the .mo and .mi --> 
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
    styles: {
    ".MathJax .mo, .MathJax .mi": {color: "black ! important"}}
    },
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']],processEscapes: true}
    });
    MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
        var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
        VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
        VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
        VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
        VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
        });
        MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
        var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
        VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
        VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
        VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
        VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
        });
  </script>
  <!-- MathJax script END-->
  
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script></script></script>

</body>
</html>